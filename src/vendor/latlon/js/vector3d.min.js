/* - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - -  */
/*  Vector handling functions      (c) Chris Veness 2011-2015 / MIT Licence  */
/* - - - - - - - - - - - - - - - -- - - - - - - - - - - - - - - - - - - - -  */
"use strict";function Vector3d(a,b,c){return this instanceof Vector3d?(this.x=Number(a),this.y=Number(b),void(this.z=Number(c))):new Vector3d(a,b,c)}Vector3d.prototype.plus=function(a){if(!(a instanceof Vector3d))throw new TypeError("v is not Vector3d object");return new Vector3d(this.x+a.x,this.y+a.y,this.z+a.z)},Vector3d.prototype.minus=function(a){if(!(a instanceof Vector3d))throw new TypeError("v is not Vector3d object");return new Vector3d(this.x-a.x,this.y-a.y,this.z-a.z)},Vector3d.prototype.times=function(a){return a=Number(a),new Vector3d(this.x*a,this.y*a,this.z*a)},Vector3d.prototype.dividedBy=function(a){return a=Number(a),new Vector3d(this.x/a,this.y/a,this.z/a)},Vector3d.prototype.dot=function(a){if(!(a instanceof Vector3d))throw new TypeError("v is not Vector3d object");return this.x*a.x+this.y*a.y+this.z*a.z},Vector3d.prototype.cross=function(a){if(!(a instanceof Vector3d))throw new TypeError("v is not Vector3d object");var b=this.y*a.z-this.z*a.y,c=this.z*a.x-this.x*a.z,d=this.x*a.y-this.y*a.x;return new Vector3d(b,c,d)},Vector3d.prototype.negate=function(){return new Vector3d(-this.x,-this.y,-this.z)},Vector3d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vector3d.prototype.unit=function(){var a=this.length();if(1==a)return this;if(0==a)return this;var b=this.x/a,c=this.y/a,d=this.z/a;return new Vector3d(b,c,d)},Vector3d.prototype.angleTo=function(a,b){if(!(a instanceof Vector3d))throw new TypeError("v is not Vector3d object");var c=this.cross(a).length(),d=this.dot(a);if(void 0!==b){if(!(b instanceof Vector3d))throw new TypeError("vSign is not Vector3d object");c=this.cross(a).dot(b)<0?-c:c}return Math.atan2(c,d)},Vector3d.prototype.rotateAround=function(a,b){if(!(a instanceof Vector3d))throw new TypeError("axis is not Vector3d object");for(var c=this.unit(),d=[c.x,c.y,c.z],e=a.unit(),f=Math.sin(b),g=Math.cos(b),h=[[e.x*e.x*(1-g)+g,e.x*e.y*(1-g)-e.z*f,e.x*e.z*(1-g)+e.y*f],[e.y*e.x*(1-g)+e.z*f,e.y*e.y*(1-g)+g,e.y*e.z*(1-g)-e.x*f],[e.z*e.x*(1-g)-e.y*f,e.z*e.y*(1-g)+e.x*f,e.z*e.z*(1-g)+g]],i=[0,0,0],j=0;3>j;j++)for(var k=0;3>k;k++)i[j]+=h[j][k]*d[k];var l=new Vector3d(i[0],i[1],i[2]);return l},Vector3d.prototype.toString=function(a){var b=void 0===a?3:Number(a),c="["+this.x.toFixed(b)+","+this.y.toFixed(b)+","+this.z.toFixed(b)+"]";return c},"undefined"!=typeof module&&module.exports&&(module.exports=Vector3d),"function"==typeof define&&define.amd&&define([],function(){return Vector3d});